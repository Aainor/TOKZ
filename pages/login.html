<!DOCTYPE html>
<html lang="es">

<head>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - TOKZ Barber</title>
    <link rel="icon" href="/public/img/iconos/favicon.webp" type="image/png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/public/css/login.css">
</head>

<body>
    <div class="login-container">
        <div class="red-glow glow-1"></div>
        <div class="red-glow glow-2"></div>

        <a href="/index.html" class="back-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                fill="currentColor">
                <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z" />
            </svg>
        </a>

        <div class="login-box fade-in">

            <div id="view-login">
                <div class="login-header">
                    <img src="/public/img/logos/Imagen3.png" alt="Logo Tokz Barber" class="login-logo">
                    <h1>TOKZ <span class="text-red">BARBER</span></h1>
                    <p>Bienvenido, inicia sesión en tu cuenta.</p>
                </div>

                <button class="btn google-btn">
                    <i class="fab fa-google"></i> Ingresar con Google
                </button>
            </div>

            <div id="view-register" class="hidden">
                <div class="login-header">
                    <img src="/public/img/logos/Imagen3.png" alt="Logo Tokz Barber" class="login-logo">
                    <h1>CREAR <span class="text-red">CUENTA</span></h1>
                    <p>Únete a la familia Tokz Barber.</p>
                </div>
            </div>

            <div id="view-user" class="hidden">
                <div class="login-header">
                    <img src="/public/img/logos/Imagen3.png" alt="Logo Tokz Barber" class="login-logo">
                    <h1>HOLA,</h1>
                    <div class="user-text-red">
                        <span class="text-red" id="user-name-display">USUARIO</span>
                    </div>
                    <p class="p">Has iniciado sesión correctamente.</p>
                </div>

                <div class="user-actions action-stack">
                    <p style="margin-bottom: 10px; color: #ccc;">¿Qué deseas hacer hoy?</p>

                    <a href="/pages/turnos.html" class="btn-login">
                        RESERVAR TURNO
                    </a>

                    <button id="btn-view-bookings" class="btn-login">
                        MIS TURNOS
                    </button>

                    <button id="btn-logout" class="btn-login btn-outline">
                        CERRAR SESIÓN
                    </button>
                </div>
            </div>

            <div id="booking-mod" class="hidden">
                <div class="login-header">
                    <img src="/public/img/logos/Imagen3.png" alt="Logo Tokz Barber" class="login-logo">
                    <h1>MIS <span class="text-red">TURNOS</span></h1>
                    <p>Gestioná tus próximas citas.</p>
                </div>

                <div class="bookings-list"
                    style="max-height: 250px; overflow-y: auto; margin: 20px 0; padding-right: 5px;">
                </div>

                <p class="auth-toggle" style="margin-top: 10px;">
                    <span id="btn-back-dashboard" class="cursor-pointer text-red">
                        <i class="fa-solid fa-arrow-left"></i> Volver
                    </span>
                </p>
            </div>

        </div>
    </div>

    <div id="view-barber" class="hidden">

        <a href="/index.html" class="dashboard-back-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" height="35px" viewBox="0 -960 960 960" width="35px"
                fill="currentColor">
                <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z" />
            </svg>
        </a>

        <div class="dashboard-header">
            <div style="text-align: left;">
                <p
                    style="color:#888; text-transform: uppercase; letter-spacing: 2px; font-size: 0.7rem; margin-bottom: 2px;">
                    Staff Tokz
                </p>
                <h2 style="color:white; font-size: 1.8rem; margin: 0; line-height: 1;">
                    Hola, <span id="barber-name-display" style="color:#AE0E30;">Colega</span>
                </h2>
            </div>
            <img src="/public/img/logos/Imagen3.png" alt="Logo" style="height: 35px; opacity: 0.8;">
        </div>

        <div id="calendar-container-wrapper">
            <div id="calendar-barber"></div>
        </div>

        <div class="action-stack-barber">
            <button id="btn-back-admin" class="btn-barber hidden"
                style="background: #333; color: white; border: 1px solid #555;">
                <i class="fa-solid fa-lock"></i> Panel Admin
            </button>

            <div class="dropdown-container-barber" style="width: 100%; margin-top: 10px; position: relative;">
                <button id="btn-nuevo-trigger" class="btn-barber" style="background:#AE0E30; color:white; border:1px solid #AE0E30; width: 100%; justify-content: space-between;">
                  <span>+ Nuevo</span>
                    <i class="fa-solid fa-chevron-up"></i>
                </button>
                
                <div id="dropdown-menu-barber" class="dropdown-menu-hidden">
                    <div id="opt-reserva" class="dropdown-item">
                        <i class="fa-regular fa-calendar"></i> <span>Reserva</span>
                    </div>
                    <div id="opt-bloqueo" class="dropdown-item">
                        <i class="fa-solid fa-ban"></i> <span>Bloquear horario</span>
                    </div>
                </div>
            </div>

            <button id="btn-refresh-barber" class="btn-barber btn-barber-refresh">
                <i class="fa-solid fa-rotate-right"></i> Actualizar
            </button>

            <button id="btn-logout-barber" class="btn-barber btn-barber-logout">
                <i class="fa-solid fa-arrow-right-from-bracket"></i> Salir
            </button>
        </div>
    </div>

    <div id="view-admin" class="hidden">
        <a href="/index.html" class="dashboard-back-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" height="35px" viewBox="0 -960 960 960" width="35px"
                fill="currentColor">
                <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z" />
            </svg>
        </a>

        <div class="admin-container fade-in">

            <div class="dashboard-header">
                <p class="admin-subtitle">PANEL DE CONTROL</p>
                <h2 class="admin-title">Administración General</h2>
            </div>

            <div class="editor-panel"
                style="background: #111; padding: 20px; border-radius: 8px; border: 1px solid #333; margin: 20px 0;">

                <div
                    style="text-align: center; margin-bottom: 20px; color: #AE0E30; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;">
                    <i class="fa-solid fa-pen-to-square"></i> Editor de Contenidos Web
                </div>

                <div class="editor-grid"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">

                    <div class="col-left">
                        <label
                            style="color: #ae0e30; font-size: 0.8rem; display:block; margin-bottom: 5px; font-weight: bold;">
                            <i class="fa-solid fa-bullhorn"></i> BARRA PROMO (INICIO)
                        </label>
                        <input type="text" id="admin-promo" placeholder="Ej: 20% OFF..."
                            style="width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; margin-bottom: 20px; box-sizing: border-box;">

                        <label
                            style="color: #ae0e30; font-size: 0.8rem; display:block; margin-bottom: 5px; font-weight: bold;">
                            <i class="fa-solid fa-scissors"></i> TÍTULO SERVICIOS
                        </label>
                        <input type="text" id="admin-serv-titulo" placeholder="Ej: Somos expertos..."
                            style="width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; margin-bottom: 10px; box-sizing: border-box;">

                        <label style="color: #777; font-size: 0.75rem; display:block; margin-bottom: 5px;" /label>
                            <textarea id="admin-serv-desc" rows="4"
                                style="width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; margin-bottom: 15px; resize: none; box-sizing: border-box;"></textarea>
                    </div>

                    <div class="col-right">
                        <label
                            style="color: #ae0e30; font-size: 0.8rem; display:block; margin-bottom: 5px; font-weight: bold;">
                            <i class="fa-solid fa-calendar-check"></i> TÍTULO TURNOS
                        </label>
                        <input type="text" id="admin-turnos-titulo" placeholder="Título sección turnos"
                            style="width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; margin-bottom: 10px; box-sizing: border-box;">

                        <label style="color: #777; font-size: 0.75rem; display:block; margin-bottom: 5px;" /label>
                            <textarea id="admin-turnos-desc" rows="4"
                                placeholder="En Tokz valoramos a nuestros clientes..."
                                style="width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; margin-bottom: 20px; resize: none; box-sizing: border-box;"></textarea>


                            <label
                                style="color: #ae0e30; font-size: 0.8rem; display:block; margin-bottom: 5px; font-weight: bold;">
                                <i class="fa-solid fa-graduation-cap"></i> TÍTULO EDUCACIÓN
                            </label>
                            <input type="text" id="admin-edu-titulo" placeholder="Título sección educación"
                                style="width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; margin-bottom: 10px; box-sizing: border-box;">

                            <textarea id="admin-edu-desc" rows="4" placeholder="Descripción Educación"
                                style="width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; margin-bottom: 15px; resize: none; box-sizing: border-box;"></textarea>
                    </div>

                </div>

                <button id="btn-guardar-todo" class="cta-button"
                    style="width: 100%; background-color: #ae0e30; color: white; padding: 15px; font-weight: bold; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; margin-top: 10px; text-transform: uppercase; letter-spacing: 1px; transition: background 0.3s;">
                    <i class="fa-solid fa-save"></i> Guardar todos los cambios
                </button>

            </div>

            <hr style="border: 0; border-top: 1px solid #333; margin: 30px 0;">

            <div class="turnos-section" style="background: rgba(255,255,255,0.02); padding: 15px; border-radius: 8px;">

                <h3
                    style="color: white; font-size: 1.2rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    <i class="fa-solid fa-list-check" style="color: #AE0E30;"></i> Control de Turnos
                </h3>

                <div class="admin-controls" style="margin-bottom: 20px;">
                    <input type="date" id="admin-date-picker" class="admin-input">

                    <button id="btn-admin-refresh" class="cta-button">
                        <i class="fa-solid fa-magnifying-glass"></i> Buscar
                    </button>

                    <button id="btn-go-calendar" class="cta-button btn-dark">
                        <i class="fa-regular fa-calendar"></i> Mi Agenda
                    </button>
                </div>

                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Hora</th>
                                <th>Cliente</th>
                                <th>Servicio</th>
                                <th>Barbero</th>
                                <th>Precio</th>
                            </tr>
                        </thead>
                        <tbody id="admin-table-body">
                        </tbody>
                    </table>
                    <p id="admin-loading-msg" class="loading-msg">Seleccioná una fecha para ver los turnos.</p>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 20px; text-align: center;">
            <a href="admin-news.html" class="btn-news">
                <i class="fas fa-newspaper"></i> Publicar nueva noticia
            </a>
        </div>

        <div class="admin-footer">
            <button id="btn-logout-admin" class="cta-button btn-dark">
                Cerrar Sesión Admin
            </button>
        </div>
    </div>
    </div>

    <div id="block-modal-overlay" class="modal-overlay hidden">
        <div class="modal-box manual-box" style="border-top: 3px solid #666;"> <div class="modal-header">
                <h3>Bloquear Horario</h3>
                <button id="close-block-btn" class="close-btn">×</button>
            </div>

            <div class="manual-form-body">
                
                <label><i class="fa-solid fa-tag"></i> Motivo / Etiqueta:</label>
                <input type="text" id="block-reason" placeholder="Ej: Almuerzo, Médico, Franco..." class="input-manual">

                <label><i class="fa-regular fa-calendar"></i> Fecha:</label>
                <input type="date" id="block-date" class="input-manual">

                <div style="display: flex; gap: 15px; margin-top: 15px;">
                    <div style="flex: 1;">
                        <label style="margin-top:0;">Desde las:</label>
                        <select id="block-start-time" class="input-manual">
                            </select>
                    </div>
                    <div style="flex: 1; display:flex; align-items:flex-end; padding-bottom:10px; justify-content:center; color:#666;">
                        <i class="fa-solid fa-arrow-right"></i>
                    </div>
                    <div style="flex: 1;">
                        <label style="margin-top:0;">Hasta las:</label>
                        <select id="block-end-time" class="input-manual">
                            </select>
                    </div>
                </div>

                <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 6px; font-size: 0.8rem; color: #aaa; display: flex; gap: 10px; align-items: center;">
                    <i class="fa-solid fa-triangle-exclamation" style="color: #ffcc00;"></i>
                    <p style="margin:0;">Esto ocupará todos los turnos en ese rango para que nadie pueda reservar.</p>
                </div>

            </div>

            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button id="btn-cancel-block" class="btn-modal btn-cancel" style="flex: 1;">Cancelar</button>
                <button id="btn-confirm-block" class="btn-modal btn-confirm" style="flex: 1; background-color: #333; border: 1px solid #555;">
                    <i class="fa-solid fa-lock"></i> Bloquear
                </button>
            </div>
        </div>
    </div>

    <div id="manual-modal-overlay" class="modal-overlay hidden">
        <div class="modal-box manual-box">
            <div class="modal-header">
                <h3>Nuevo Turno Manual</h3>
                <button id="close-manual-btn" class="close-btn">×</button>
            </div>

            <div class="manual-form-body">
                <label>Cliente:</label>
                <input type="text" id="manual-client-name" placeholder="Nombre completo" class="input-manual">

                <label>Contacto:</label>
                <input type="text" id="manual-client-contact" placeholder="Email o Teléfono" class="input-manual">

                <label>Servicio:</label>
                <select id="manual-service-select" class="input-manual">
                    <option value="Corte de Cabello">Corte de Cabello</option>
                    <option value="Barba">Barba</option>
                    <option value="Corte + Barba">Corte + Barba</option>
                    <option value="Color">Color</option>
                </select>

                <label>Fecha:</label>
                <input type="date" id="manual-date-picker" class="input-manual">

                <label>Horario Disponible:</label>
                <div id="manual-time-grid" class="time-grid-manual">
                    <p style="color: #666; font-size: 0.8rem;">Seleccioná una fecha para ver horarios.</p>
                </div>
            </div>

            <button id="btn-save-manual" class="cta-button" disabled style="width: 100%; margin-top: 20px;">
                Confirmar Turno
            </button>
        </div>
    </div>



    <script src="/public/js/goBack.js"></script>
    <script src="/public/js/guard.js"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // Reemplazá esto con TU PUBLIC KEY (la misma que usás en turnos.html)
            emailjs.init("mqEKc7hr2XQkSspXp");
        })();
    </script>
    
    <script type="module" src="/public/js/auth-logic.js"></script>

</body>

</html>